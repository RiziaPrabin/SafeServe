<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add Inspection</title>
    <link rel="icon" href="/static/favicon.ico" type="image/x-icon">

    <link rel="stylesheet" href="styfir.css">
</head>
<body>
    <div class="container">
        <nav class="sidebar">
            <!-- SafeServe Icon and Caption -->
            <div class="logo-section">
                <h2>SafeServe</h2>
                <p class="caption">Your Trusted Partner for Safe and Quality Dining Experiences</p>
            </div>

            <!-- Dashboard Link with Icon -->
            <ul>
                <li>
                    <a href="dashbo.html" class="nav-link">
                        <img src="icon.png" alt="Dashboard Icon" class="dashboard-icon"> Dashboard
                    </a>
                </li>
                <!-- Other links as needed -->
            </ul>
        </nav>
    <main class="content">   
    <h1>Add Inspection</h1>
    <form action="/add_inspection" method="POST">
        <label for="hotel_id">Hotel ID:</label>
        <input type="number" id="hotel_id" name="hotel_id" required>

        <label for="inspection_date">Inspection Date:</label>
        <input type="date" id="inspection_date" name="inspection_date" required>

        <label for="inspector_id">Inspector ID:</label>
        <input type="number" id="inspector_id" name="inspector_id" required>

        <label for="overall_result">overall_result</label>
        <select id="overall_result" name="overall_result" required>
            <option value="Passed">Passed</option>
            <option value="Failed">Failed</option>
            <option value="Needs Improvement">Needs Improvement</option>
        </select>

        <label for="comments">Comments:</label>
        <textarea id="comments" name="comments" required></textarea>

        <button type="submit" id="submitButton">Add Inspection</button>

    </form>
    <script>
       document.addEventListener('DOMContentLoaded', function () {
    // Add event listener to the form submit button
    const submitButton = document.getElementById('submit-inspection');
    submitButton.addEventListener('submit', submitInspection);
});

// Submit Inspection Function
function submitInspection(event) {
    event.preventDefault(); // Prevent default form submission

    const inspectionData = {
        hotel_id: 1, // Replace with the actual hotel ID dynamically if available
        inspection_date: document.getElementById('inspection_date').value, // Get date from the input
        inspector_id: document.getElementById('inspector_id').value, // Get inspector ID from the input
        overall_result: document.getElementById('overall_result').value, // Get status from dropdown
        comments: document.getElementById('comments').value // Get comments from the textarea
    };

    // Send the data to the backend (Flask) via a POST request
    fetch('/add_inspection', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify(inspectionData)
    })
    .then(response => response.json())
    .then(data => {
        if (data.message) {
            alert(data.message); // Show success message
        } else if (data.error) {
            alert('Error: ' + data.error); // Show error message
        }
    })
    .catch(error => {
        console.error('Error submitting inspection:', error);
        alert('Failed to submit inspection. Please try again.');
    });
}

    </script>
    
</body>
</html>
